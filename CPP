Two PMs that have been requested:

1.  conan  -- https://docs.conan.io/2/
2.  vcpkg  -- https://learn.microsoft.com/en-us/vcpkg/

Qs:
 1. Can we lock it?
 2. Can it just download?
 3. Can we generate a SBOM?
 4. Can we use a different cache?


1. Conan
--------

Qs:
1. Yes
2. Yes-ish (looks like it requires some parsing of the file sincwe it can download a specific package only and from a specific registry)
   (it is also a bit unclear what to do with conanfile.py which might contain conditional dependencies)
3. Apparently yes, but with a twist -- it happens either at packaging side or wirth some non-standard tooling,
   prob. using conan as a dependency and just converting a graph into something more palatable is the best option
4. With the conan cache save and conan cache restore commands, it is possible
   to create a .tgz from one or several packages from a Conan cache and later
   restore those packages into another Conan cache. There are some scenarios this
   can be useful:  https://docs.conan.io/2/devops/save_restore.html#devops-save-restore

Copy sources from all dependencies:
https://docs.conan.io/2/examples/extensions/deployers/sources/custom_deployer_sources.html

Appears to have python interface, e.g. for generating BOMs,  [is actually written in Python]
Preferred way of installation if from PyPI (!) It has conanfile.py which,
by definition, can contain arbitrarty code.
However, conan does not build anything -- it only prepares packages for a build
with sth else, e.g. cmake
 - Conan takes packages to be installed from conancentral by default
 - Conan can be told to use tools not matchin the system-wide tools (e.g. a different
 version of cmake), it would generate a venv-like entity with a modified path
 - conan understands lock files

Warning about modifying a cache:
 An important note: the Conan cache is private to the Conan client -
modifying, adding, removing or changing files inside the Conan cache is
undefined behaviour likely to cause breakages.

Just running an install seems to grab _just the release


Also this:
 a conanfile.py file where you can use Python code to make things such as
 adding requirements dynamically, changing options depending on other options
 or setting options for your requirements.

conanfile.py is problematic since it could contain arbitrary code and officially
modify stuff. While conan reports SBOMs in CycloneDX format we cannot rule out
manipulations happening during running conanfile. DOes it happen during configuration only?

A potential problem with conan could be that it requires a build profile to exist.
It will refuse to continue if the profile is missing. Replanting potentially fetched deps
into a different machine/container could result in surprises unless there is a profile
there. TODO: check for environment variables to set when dealing with Conan

Q? how many projects on GH use conan?



Commands:
$ conan cache --help
Perform file operations in the local cache (of recipes and/or packages)
...
    save                Get the artifacts from a package list and archive them


2. vcpkg
--------

https://github.com/microsoft/vcpkg/issues/9015:
I cannot recommend using vcpkg without a net connection capable of downloading
the archives in good time. Qt is an especially good example of a port which you
really, really need a working net connection to build.

I will also say that if you do not have a choice about the availability or
speed of the net connection, that you should find a friend or family member who
can allow you the bandwidth you need and politely ask to use their connection
to build everything you need in one go (then make a copy of vcpkg's downloads
folder for when you are offline.) This assumes that you have a laptop or other
Linux, Windows or OSX portable device.


 1. Can we lock it? -- apparently yes, with https://learn.microsoft.com/en-us/vcpkg/concepts/manifest-mode
 2. Can it just download? -- yes,  Try .\vcpkg.exe install "package" "package" "etc" --only-downloads 
 3. Can we generate a SBOM?  -- apparently yes, in the worst case we could parse 
 4. Can we use a different cache?



 Conan
 -----

 Conan support: provide initial design draft

 There have been requests to support [conan]() in Hermeto. To do so a design
 draft must be provided. A design draft should contain:

  1. General information about the package manager;
  2. Whether or not it poses a risk of arbitrary code execution;
  3. Describe mechanisms for locking dependecnesi with it;
  4. Describe mechanisms for switching to different package sources (if applicable).


 Conan support: add ability to fetch packages

 In order to support [conan]() packages have to be fetched.

  1. locked versions of packages must be fetched;
  2. fetched packages must be stored in a preconfigured location;
  3. all transient data generated by conan should be saved.


 Conan support: provide build configuration

 iIn order to build a [conan]() package hermetically build configuration
 has to be provided.


 Conan support: add integration and E2E tests

 Tests are needed to ensure the PM works as expected.
 
  1. Integration tests;
  2. E2E test which downloads and builds a package.


Conan support: user-facing documentation

In order to help users work with the new PM user-facing documentation must be added
to the project.


vcpkg
-----

 vcpkg support: provide initial design draft

 There have been requests to support [vcpkg]() in Hermeto. To do so a design
 draft must be provided. A design draft should contain:

  1. General information about the package manager;
  2. Whether or not it poses a risk of arbitrary code execution;
  3. Describe mechanisms for locking dependencies with it;
  4. Describe mechanisms for switching to different package sources (if applicable).


 vcpkg support: add ability to fetch packages

 In order to support [vcpkg]() packages have to be fetched.

  1. locked versions of packages must be fetched;
  2. fetched packages must be stored in a preconfigured location;
  3. all transient data generated by vcpkg should be saved.


 vcpkg support: provide build configuration

 iIn order to build a [vcpkg]() package hermetically build configuration
 has to be provided.


 vcpkg support: add integration and E2E tests

 Tests are needed to ensure the PM works as expected.
 
  1. Integration tests;
  2. E2E test which downloads and builds a package.


vcpkg support: user-facing documentation

In order to help users work with the new PM user-facing documentation must be added
to the project.
